<style>
    .clickable {
        font-size: 1.5em;
        font-weight: bold;
    }

    .clickable:hover {
        text-decoration: underline;
        cursor: pointer;
    }
</style>

<table>
    <tr>
        <th></th>
        <th><i class="fa fa-file-text-o"></i> Description</th>
        <th>Result</th>
        <th>Cause</th>
    </tr>
    {% for test in include.testRun %}
    <tr>
        {% if test.type == "compound" %}
        <td class="clickable" data-rows="{{ test.tests | size }}">+</td>
        {% elseÂ %}
        <td></td>
        {% endif %}
        <td>{{ test.desc }}</td>
        {% if test.result.value == "SUCCESS" %}
        <td align="center" title="{{ test.result.cause }}"><i class="fa fa-check"></i></td>
        {% else %}
        <td align="center" title="{{ test.result.cause }}"><i class="fa fa-exclamation-triangle"></i></td>
        {% endif %}
        <td title="{% for sw in test.response.sws %}{{ sw }} {% endfor %}">{{ test.result.cause }}</td>
    </tr>
    {% if test.type == "compound" %}
    {% for t in test.tests %}
    <tr style="display: none;">
        <td></td>
        <td>{{ t.desc }}</td>
        <td title="{{ t.result.cause }}">{{ t.result.value }}</td>
        <td title="{% for sw in t.response.sws %}{{ sw }} {% endfor %}">{{ t.result.cause }}</td>
    </tr>
    {% endfor %}
    {% endif %}
    {% endfor %}
</table>


<script>
    $(".clickable").click(function (btn) {
        var tests = $(this).attr("data-rows");
        $(this).parent().nextAll().each(function () {
            if (tests > 0) {
                $(this).toggle();
                tests--;
            }
        });
        if (btn.currentTarget.innerHTML === "+") {
            btn.currentTarget.innerHTML = "-";
        } else {
            btn.currentTarget.innerHTML = "+";
        }
    });
</script>